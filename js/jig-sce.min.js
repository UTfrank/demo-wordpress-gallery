String.prototype.repeat||(String.prototype.repeat=function(e){"use strict";if(null==this)throw new TypeError("can't convert "+this+" to object");var t=""+this;if((e=+e)!=e&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e==1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),0==t.length||0==e)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var i="";1==(1&e)&&(i+=t),0!=(e>>>=1);)t+=t;return i}),function(e){e("#mce-modal-block",window.parent.document).on("click",(function(){e(".mce-close",window.parent.document).click()}));var t=!1,i=!1;window.detectContext=function(){0!==e(window.parent.document).find("#jig-sce").length?(t=!0,e("body").addClass("standaloneEditor"),e("#shortcodeImportContainer").append(e("#inputShortcodeBlock").removeClass("clearfix")),e("#shortcodeExportContainer").append(e("#outputShortcodeLabel, #outputShortcode")),e("#outputShortcodeLabel").text(SCE.full_shortcode_output+":"),e("#jigTabShortcode").show()):void 0===window.parent.JIG_VC||void 0!==window.parent.JIG_VC&&jQuery.isEmptyObject(window.parent.JIG_VC)?(e("#saveShortcode, #previewShortcode").hide(),e('iframe[src*="jig_shortcode_editor"]',window.parent.document).closest(".mce-floatpanel").find(".mce-title").text(SCE.jig_sce_title)):(i=!0,!1===window.parent.JIG_VC.frontend?e("#previewShortcode").hide():e("#previewShortcode").show(),e("#saveShortcode").show(),void 0!==window.parent.JIG_VC.params&&e("#inputShortcode").val(window.parent.JIG_VC.params.content))},detectContext();!function(){if(!t&&!i){var l=e("meta[name=viewport]",window.parent.document).attr("content");e("meta[name=viewport]",window.parent.document).attr("content","width=1200, height=600, maximum-scale=1");var a=window.parent.document,r=a.documentElement.clientHeight-20,n=e(".mce-window-head",a).outerHeight();e(".mce-window-body",a).css({height:r-n+"px"}),e(".mce-window",a).css({height:r,top:"10px"}),e(".mce-close",window.parent.document).on("click",(function(){e("meta[name=viewport]",window.parent.document).attr("content",l)}))}}();var l=[];e(document).ajaxSend((function(e,t,i){l.push(t)})),e(document).ajaxComplete((function(t,i,a){l=e.grep(l,(function(e){return e!=i}))}));var a=["preset","mobile_preset","gallery","ids","thumbs_spacing","animation_speed","custom_class","row_height","height_deviation","limit_by_viewport","mobile_row_height","mobile_height_dev","link_class","link_rel","link_attribute_name","link_attribute_value","use_link_attributes","link_title_field","img_alt_field","lightbox_custom_field","prettyphoto_social","pp_social_buttons","photoswipe_social","ps_social_buttons","photoswipe_theme","photoswipe_zoom","prettyphoto_theme","prettyphoto_analytics","prettyphoto_title_pos","magnific_zoom","private_lightbox","load_bundled_lightbox","download_link","custom_link_follow","only_for_logged_in","load_more","initially_load","load_more_limit","load_more_text","load_more_count_text","load_more_offset","load_more_auto_width","title_field","caption_field","caption_custom_field","caption","mobile_caption","caption_opacity","caption_bg_color","caption_match_width","caption_text_color","caption_height","mobile_caption_height","caption_title_size","caption_desc_size","caption_align","v_center_captions","custom_fonts","caption_text_shadow","gradient_caption_bg","overlay","mobile_overlay","overlay_color","overlay_icon","overlay_icon_opacity","overlay_icon_url","overlay_icon_retina","overlay_opacity","outer_shadow","inner_shadow","outer_border_width","outer_border_color","outer_border","middle_border_width","middle_border_color","middle_border","inner_border_width","inner_border_color","inner_border","inner_border_animate","specialfx","mobile_specialfx","specialfx_type","caption_fx_visibility","specialfx_options","specialfx_blend","lightbox","mobile_lightbox","lightbox_max_size","min_height","loading_background","link_override","separator_character","show_text_before","show_text_after","margin","timthumb_path","quality","retina_ready","retina_quality","min_retina_quality","max_retina_density","timthumb_crop_zone","use_timthumb","thumbnail_base","orderby","filterby","filter_style","filter_all_text","filter_orderby","filter_custom_order","exclude_filter_terms","filter_min_count","filter_top_x","filter_all_button","filter_multiple","l2_filterby","l2_filter_style","l2_filter_all_text","l2_filter_orderby","l2_filter_custom_order","l2_exclude_filter_terms","l2_filter_min_count","l2_filter_top_x","l2_filter_all_button","l2_filter_multiple","allow_animated_gifs","allow_transp_pngs","process_shortcodes","wrap_text","reading_direction","limit","hidden_limit","max_rows","custom_width","width_mode","last_row","aspect_ratio","disable_cropping","force_aspect_ratio","randomize_width","disable_mobile_hover","mouse_disable","error_checking","suppress_errors","id","image_tags","image_categories","image_taxonomy","image_tax_term","ex_image_taxonomy","ex_image_tax_term","parent_id","link_target","nggallery","ngalbum","ng_gallery","ng_album","ng_pics","ng_tags_gallery","ng_tags_album","ng_recent_galleries","ng_recent_images","ng_random_images","ng_search_query","ng_search_options","ng_count","ng_lightbox_gallery","ng_description","ng_intersect_tags","ng_display_tags","ng_gallery_links","nextgen_cf_link","ng_narrow_by_tags","ng_breadcrumb","ng_bc_separator","ng_bc_base","ng_bc_home","ng_bc_home_text","ng_bc_home_clickable","ng_bc_last_clickable","ng_bc_top_level","ng_bc_add_separator","rml_id","rml_flatten","rml_count","rml_lightbox_groups","rml_extend_filtering","rml_description","rml_breadcrumb","rml_bc_top_level","rml_bc_separator","rml_bc_home_text","exclude","facebook_id","facebook_album","facebook_caching","facebook_image_size","facebook_description","facebook_count","fb_lightbox_album","fb_actual_cover_photo","fb_breadcrumb","fb_album_exclude","fb_bc_separator","fb_bc_home_text","flickr_user","flickr_photostream","flickr_favorites","flickr_group","flickr_photoset","flickr_collection","flickr_gallery","flickr_search_text","flickr_search_tags","flickr_search_tags_m","flickr_search_user","flickr_search_group","flickr_search_sort","flickr_search_license","flickr_search_geo","flickr_breadcrumb","flickr_bc_separator","flickr_bc_home_text","flickr_lightbox_set","flickr_caching","flickr_link","flickr_count","flickr_description","rss_url","rss_links_to","rss_description","rss_excerpt_length","rss_excerpt_ending","rss_link","rss_link_text","rss_caching","developer_link","recent_posts","recents_description","recents_description_2","recents_description_3","post_metadata_fields","excerpt_length","excerpt_ending","author_prefix","comments_text","recents_title_override","post_ids_exclude","recents_exclude","recents_include","recents_tags","recents_filter_tax","recents_author","recents_filter_term","recents_placeholder","recents_link_to","recents_link","recents_link_text","recents_custom_links","recents_link_field","recents_sticky","recents_date_range","recents_last_x_days","recents_post_type","post_ids","recents_parent_id","recents_tree_depth"],r=a.length,n=[],o=[],c=[],s="justified_image_grid",_=0;function d(){e("#imagePicker").on("click",g),e("#facebook").on("click",".fbSourceBtn",(function(t){e("#fbOffBtn").hasClass("fbSelected")||e(t.target).attr("id")===e(".fbSelected").attr("id")||e("#facebook input[name='facebook_album']").val("");var i=e(this),l=i.attr("id");if(e(".fbSelected").removeClass("fbSelected"),i.addClass("fbSelected"),"fbOffBtn"!=i.attr("id")){e("#fbLoadingAJAX").show(),e("#fbSources").css("visibility","hidden");var a=i.attr("data-access-token");e("#facebook input[name='facebook_id']").val(l),e.post(SCE.admin_ajax_url,{action:"jig_get_fb_albums",security:SCE.nonce.jig_get_fb_albums,token:a,user_id:l},(function(t){if(t.elements){e("#fbAlbums").html(t.elements);var i=e("#facebook input[name='facebook_album']").val();if(""!==i)if(-1==(i=i.replace(/["' ]/gi,"")).indexOf(","))e("#"+i).click();else{e("#jigFbAllowMultipleInput").prop("checked",!0);for(var l=(i=i.split(",")).length,a=0;a<l;a++)e("#"+i[a]).click()}}else t.error&&e("#fbAlbums").html('<div id="fbError">'+t.error+"</div>");e("#fbLoadingAJAX").hide(),e("#fbSources").css("visibility","visible")}),"json").fail((function(){e("#fbAlbums").html('<div id="fbError">'+SCE.ajax_error_check_console+"</div>"),e("#fbLoadingAJAX").hide(),e("#fbSources").css("visibility","visible")}))}})),e("#facebook").on("click",".fbAlbum:not(.fbNoImg)",(function(t){var i=e(this),l=i.attr("id");if(0==e("#jigFbAllowMultipleInput").is(":checked"))e(".fbSelectedAlbum").removeClass("fbSelectedAlbum"),e("#facebook input[name='facebook_album']").val(l),i.addClass("fbSelectedAlbum");else if("overview"==l||"overview_only_albums"==l||"feed"==l||"latest"==l)e(".fbSelectedAlbum").removeClass("fbSelectedAlbum"),e("#facebook input[name='facebook_album']").val(l),i.addClass("fbSelectedAlbum");else{i.toggleClass("fbSelectedAlbum");var a=[];e(".fbSelectedAlbum").each((function(t,i){var l=e(i).attr("id");"overview"==l||"overview_only_albums"==l||"feed"==l||"latest"==l?e(i).removeClass("fbSelectedAlbum"):a.push(l)})),e("#facebook input[name='facebook_album']").val('"'+a.join(", ")+'"')}i.find(".fbAlbumLoading").length<1&&y(i)})),e("#fbSources").on("click","#fbOffBtn",(function(t){e("#fbAlbums").empty();var i="#jig-sc-editor .jig_settings_group_facebook";e(i+' input[name="facebook_id"]').val(""),e(i+' input[name="facebook_album"]').val("")})),e("#facebook").on("mouseenter",".fbSkipImg",(function(t){var i=e(this);t.stopImmediatePropagation(),i.find(".fbMouseIndicator").length<1&&(i.append('<div class="fbMouseIndicator fbStandby">!</div>'),i.find(".fbLoading").length<1&&y(i))})),e("#flickr").on("click",".fliSourceBtn",(function(t){var i=e(this),l=i.attr("id");e(".fliSourceBtn.fliSelected").removeClass("fliSelected"),i.addClass("fliSelected"),"fliOffBtn"!=i.attr("id")&&"fliSearchBtn"!=i.attr("id")&&(e("#fliSearchPanel").hide(),e("#fliLoadingAJAX").show(),e("#fliSources, #fliTypes").css("visibility","hidden"),e("#fliRow input").not(".checkbox").val(""),e.post(SCE.admin_ajax_url,{action:"jig_get_fli_types",security:SCE.nonce.jig_get_fli_types,user_id:l},(function(t){var i=!0;e("#fliTypes, #fliElements").empty(),t.elements?(e("#fliTypes").html(t.elements),void 0!==o&&(o.flickr_user?o.flickr_group?(e("#fliGroupSelector").click(),i=!1):o.flickr_photoset?(e("#fliPhotosetSelector").click(),i=!1):o.flickr_collection?(e("#fliCollectionSelector").click(),i=!1):o.flickr_gallery&&(e("#fliGallerySelector").click(),i=!1):o.flickr_photostream?(e(".fliPhotostreamBtn").click(),o=void 0):o.flickr_favorites&&(e(".fliFavoritesBtn").click(),o=void 0))):t.error&&e("#fliTypes").html('<div id="fliError">'+t.error+"</div>"),1==i&&(e("#fliLoadingAJAX").hide(),e("#fliSources, #fliTypes").css("visibility","visible"))}),"json").fail((function(){e("#fliTypes").html('<div id="fliError">'+SCE.ajax_error_check_console+"</div>"),e("#fliLoadingAJAX").hide(),e("#fliSources, #fliTypes").css("visibility","visible")})))})),e("#fliSources").on("click","#fliOffBtn",(function(t){e("#fliTypes, #fliElements").empty(),e("#fliSearchPanel").hide(),e("#fliRow input").not(".checkbox").val("")})),e("#fliSources").on("click","#fliSearchBtn",(function(t){if(e("#fliTypes, #fliElements").empty(),e("#fliRow input").not(".checkbox").val(""),void 0!==o&&(o.flickr_search_text||o.flickr_search_tags)){if(o.flickr_search_text&&e('#flickr input[name="flickr_search_text"]').val(o.flickr_search_text),o.flickr_search_tags&&e('#flickr input[name="flickr_search_tags"]').val(o.flickr_search_tags),o.flickr_search_tags_m&&e('#flickr select[name="flickr_search_tags_m"]').val(o.flickr_search_tags_m),o.flickr_search_user&&e('#flickr input[name="flickr_search_user"]').val(o.flickr_search_user),o.flickr_search_group&&e('#flickr input[name="flickr_search_group"]').val(o.flickr_search_group),o.flickr_search_sort&&e('#flickr select[name="flickr_search_sort"]').val(o.flickr_search_sort),o.flickr_search_license)if(-1!==o.flickr_search_license.indexOf(",")){var i=o.flickr_search_license.split(",");e.each(i,(function(t,i){e('#jig-sc-editor input[name="flickr_search_license[]"][value="'+i+'"]').attr("checked",!0)}))}else e('#jig-sc-editor input[name="flickr_search_license[]"][value="'+o.flickr_search_license+'"]').attr("checked",!0);o.flickr_search_geo&&e('#flickr select[name="flickr_search_geo"]').val(o.flickr_search_geo),o=void 0}e("#fliSearchPanel").show()})),e("#fliTypes").on("click",".fliPhotostreamBtn",(function(t){e(".fliTypeBtn.fliSelected").removeClass("fliSelected"),e(this).addClass("fliSelected"),e("#fliElements").empty(),e("#fliRow input").val(""),e('#flickr input[name="flickr_photostream"]').val(e(".fliSourceBtn.fliSelected").attr("id"))})).on("click",".fliFavoritesBtn",(function(t){e(".fliTypeBtn.fliSelected").removeClass("fliSelected"),e(this).addClass("fliSelected"),e("#fliElements").empty(),e("#fliRow input").val(""),e('#flickr input[name="flickr_favorites"]').val(e(".fliSourceBtn.fliSelected").attr("id"))})).on("click","#fliGroupSelector, #fliPhotosetSelector, #fliCollectionSelector, #fliGallerySelector",(function(t){e(".fliTypeBtn.fliSelected").removeClass("fliSelected"),e(this).addClass("fliSelected"),e("#fliRow input").val("");var i=e(".fliSourceBtn.fliSelected").attr("id"),l=e(this).attr("id");l=l.substring(3,l.length-8).toLowerCase(),e("#fliLoadingAJAX").show(),e("#fliSources, #fliTypes").css("visibility","hidden"),e.post(SCE.admin_ajax_url,{action:"jig_get_fli_elements",security:SCE.nonce.jig_get_fli_elements,user_id:i,type:l},(function(t){t.elements?(e("#fliElements").html(t.elements),void 0!==o&&o.flickr_user&&(o["flickr_"+l]&&e("#"+o["flickr_"+l]).click(),o=void 0)):t.error&&e("#fliElements").html('<div id="fliError">'+t.error+"</div>"),e("#fliLoadingAJAX").hide(),e("#fliSources, #fliTypes").css("visibility","visible")}),"json").fail((function(){e("#fliElements").html('<div id="fliError">'+SCE.ajax_error_check_console+"</div>"),e("#fliLoadingAJAX").hide(),e("#fliSources, #fliTypes").css("visibility","visible")}))})).on("click","#fliPassToSeach",(function(t){var i=e(".fliSourceBtn.fliSelected").attr("id");e("#fliSearchBtn").click(),e('#flickr input[name="flickr_search_user"]').val(i).css({"border-color":"#33691e","background-color":"#ccff90"}).on("click",(function(){e(this).removeAttr("style")}))})),e("#fliElements").on("click",".fliElement:not(.fliNoImg,.fliSelectedElement,.fliCollectionElement,.fliSetElement)",(function(t){var i=e(this);e(".fliSelectedElement").removeClass("fliSelectedElement"),i.addClass("fliSelectedElement");var l=e(".fliTypeBtn.fliSelected").attr("id");l=l.substring(3,l.length-8).toLowerCase();var a=i.attr("id");e('#flickr input[name="flickr_'+l+'"]').val(a);var r=e(".fliSourceBtn.fliSelected").attr("id");e('#flickr input[name="flickr_user"]').val(r),i.find(".fliElementLoading").length<1&&S(i)})),e("#fliElements").on("click",".fliCollectionElement",(function(t){var i=e(this).closest(".fliCollectionElementGroup");e(".fliSelectedGroup").removeClass("fliSelectedGroup"),e(".fliSelectedElement").removeClass("fliSelectedElement"),i.addClass("fliSelectedGroup");var l=i.attr("data-collection-id");e('#flickr input[name="flickr_photoset"]').val(""),e('#flickr input[name="flickr_collection"]').val(l);var a=e(".fliSourceBtn.fliSelected").attr("id");e('#flickr input[name="flickr_user"]').val(a)})),e("#fliElements").on("click",".fliSetElement",(function(t){var i=e(this);e(".fliSelectedGroup").removeClass("fliSelectedGroup"),e(".fliSelectedElement").removeClass("fliSelectedElement"),i.addClass("fliSelectedElement");var l=i.closest(".fliSetElementGroup").attr("data-set-id");e('#flickr input[name="flickr_collection"]').val(""),e('#flickr input[name="flickr_photoset"]').val(l);var a=e(".fliSourceBtn.fliSelected").attr("id");e('#flickr input[name="flickr_user"]').val(a)})),e("#flickr").on("mouseenter",".fliSkipImg",(function(t){var i=e(this);t.stopImmediatePropagation(),i.find(".fliMouseIndicator").length<1&&(i.append('<div class="fliMouseIndicator fliStandby">!</div>'),i.find(".fliLoading").length<1&&S(i))}));var i=!0;e("#jig_rss_tab_content").on("click","#rssGenerateButton",(function(t){!function(){var t=e("#rssRegularLinkField").val(),i="",l="";if(siteRegexp=/http(?:s)?:\/\/(?:[\w\-]+\.)*([\w\-]{1,63})(?:\.(?:\w{3}|\w{2}))(?:$|\/)/m,match=siteRegexp.exec(t),null!=match)switch(domain=match[1].toLowerCase(),domain){case"youtube":i=t;case"vimeo":/^(?:.*?)vimeo\.com\/([^\/]*?)\/(videos|likes)\/?$/im.test(t)?i=b(t,"rss"):/^(?:.*?)vimeo\.com\/(channels|groups)\/([^\/]*?)\/?$/im.test(t)?i=b(t,"videos/rss"):/^(?:.*?)vimeo\.com\/(album)\/([^\/]*?)\/?$/im.test(t)&&(i=b(t,"rss"));break;case"500px":/^(?:.*?)500px\.com\/search\?/im.test(t)?i=t.replace("search?","search.rss?"):/^(?:.*?)500px\.com\/([^\/]*?)\/?$/im.test(t)&&(i=b(t,"rss"));break;case"pinterest":var a=/^(?:.*?)pinterest\.com\/([^\/]*?)(?:\/pins)?\/?$/im.exec(t);null!=a?i="https://pinterest.com/"+a[1]+"/feed.rss":null!=(a=/^((?:.*?)pinterest\.com\/(?:[^\/]*?)\/(?!pins|likes)(?:[^\/]+))\/?$/im.exec(t))&&(i=a[1]+".rss");break;case"deviantart":var r=/^(?:.*?)\/\/([^.]*?)\.deviantart\.com\/gallery(?:\/(\d+?)|\/\?catpath=%2F(.*))?\/?$/im.exec(t);if(null!=r)null==r[2]&&null==r[3]?i="https://backend.deviantart.com/rss.xml?q=gallery%3A"+r[1]+"&type=deviation":isNaN(r[2])?null!=r[3]&&(i="https://backend.deviantart.com/rss.xml?q=gallery%3A"+r[1]+"+in%3A"+r[3]+"+sort%3Atime&type=deviation"):i="https://backend.deviantart.com/rss.xml?q=gallery%3A"+r[1]+"%2F"+r[2]+"&type=deviation";else{var n=/^(?:.*?)\/\/([^.]*?)\.deviantart\.com\/favourites\/(\d+?)\/?$/im.exec(t);null!=n&&(i="https://backend.deviantart.com/rss.xml?q=favby%3A"+n[1]+"%2F"+n[2]+"&type=deviation")}break;case"stumbleupon":var o=/^(?:.*?)stumbleupon\.com\/(stumbler\/[^\/]*?)\/?$/im.exec(t);null!=o?i=b("https://www.stumbleupon.com/rss/"+o[1],"likes"):null!=(o=/^(?:.*?)stumbleupon\.com\/(channel\/[^\/]*?)\/?$/im.exec(t))&&(i=b("https://www.stumbleupon.com/rss/"+o[1],"content"));break;case"imgur":/^(?:.*?)imgur\.com\/r\/[^\/]*?\/?$/im.test(t)?i=b(t,"rss"):/^(?:.*?)imgur\.com\/?$/im.test(t)&&(i="https://feeds.feedburner.com/ImgurGallery?format=xml");break;case"tumblr":/^(?:.*?)\/\/(?!www).*\.tumblr\.com\/?$/im.test(t)&&(i=b(t,"rss"));break;case"wordpress":/^(?:.*?)\/\/(?!www).*\.wordpress\.com.*/im.test(t)&&(i=b(t,"feed"));break;default:l=SCE.site_not_supported}else l=SCE.seems_like_an_invalid_link;""!==i?(e("#rssFeedUrlField").val(i),e("#rssFeedUrlField").select(),e("#rssFeedUrlField").removeClass("invalidRssUrl")):""!==l?(e("#rssFeedUrlField").val(l),e("#rssFeedUrlField").addClass("invalidRssUrl")):(e("#rssFeedUrlField").val(SCE.regular_link_is_not_supported),e("#rssFeedUrlField").addClass("invalidRssUrl"))}()})).on("click","#rssSetButton",(function(t){e('#jig-sc-editor textarea[name="rss_url"]').val(e("#rssFeedUrlField").val())})).on("click","#rssAppendButton",(function(t){if(1==i){var l=e('#jig-sc-editor textarea[name="rss_url"]').val();if(e("#rssFeedUrlField").hasClass("invalidRssUrl"))return;""==l?e('#jig-sc-editor textarea[name="rss_url"]').val(e("#rssFeedUrlField").val()):e('#jig-sc-editor textarea[name="rss_url"]').val(l+","+e("#rssFeedUrlField").val()),e("#rssAppendButton").css({opacity:.5,cursor:"auto"}),i=!1}setTimeout((function(){e("#rssAppendButton").css({opacity:1,cursor:"pointer"}),i=!0}),2e3)})),0!==e(".rml-root-list").length&&e("#rml_id").append(j(e(".rml-root-list ul").eq(0).find(" > li"),0));var l=e("#rml_id").data("tree");l&&e("#rml_id").append(C(l,0)),t&&(e(document).ready((function(){void 0!==window.parent.getSavedShortcodeForJIG&&e("#inputShortcode").val(window.parent.getSavedShortcodeForJIG()),w()})),e(document).on("keydown",(function(e){13==e.which&&(window.parent.previewJIG(),localStorage.setItem("JIGManualPreviewCounter","disabled"))}))),t||window.setTimeout((function(){e("#inputShortcode").focus()}),1),v(),e("#ids").on("keyup change",v),e("#inputShortcode").on("keyup change paste",w),e("#outputShortcode").click((function(){e(this).select()})),t||e("#outputShortcode").width(e(window).width()-e("#outputShortcode").offset().left-22),e("#createShortcode").click((function(){x(),t||window.setTimeout((function(){e("#outputShortcode").focus().select(),document.execCommand("copy"),T(SCE.shorcode_copied)}),1)})),e("#saveShortcode").click((function(t){x();var i=e("#outputShortcode").val();window.parent.JIG_VC.obj.model.save("params",{content:i}),window.parent.JIG_VC.shortcode=i,window.parent.jQuery("#jig-sce-jquery-ui-dialog").dialog("close")})),e("#previewShortcode").click((function(t){x();var i=e("#outputShortcode").val(),l=window.parent.jQuery('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]'),a=e(window.parent).width(),r=l.outerWidth(),n=l.offset().left,o=a/2-r/2,c=e(window.parent).height(),s=l.outerHeight(),_=l.offset().top,d=c/2-s/2;l.addClass("previewingShortcode"),n>o-20&&n<o+20&&_>d-20&&_<d+20?l.css("right",(function(){return a-n-r})).css("bottom",(function(){return c-_-s})).css({left:"auto",top:"auto"}).animate({right:20,bottom:20},300,(function(){window.parent.JIG_VC.obj.model.save("params",{content:i})})):window.parent.JIG_VC.obj.model.save("params",{content:i})})),e("#templateTagButton").click(E)}var f,m=!1,u="",p=!1;function g(){window.parent._;var i=window.parent.wp,l=e("#ids"),a=l.val(),r=a?"gallery-edit":"gallery-library",n=r!==f;f=r,!m||n||a!==u||p?((m=i.media({frame:"post",state:r,library:{type:"image"}})).on("open",(function(){if(a){var e,t=function(e){var t=e.split(",");if(e.indexOf("-")>-1){for(var i,l=0;l<t.length;l++)t[l].indexOf("-")>-1&&(i=t[l].split("-"),t[l]=h(i[0],i[1]).join(","));t=t.join(",").split(",")}return t}(a),l=m.state().get("library");void 0!==m.$el&&void 0!==m.$el[0]&&(e=m.$el[0].querySelector(".media-toolbar .spinner")),e&&e.classList.add("is-active");var r=i.media.query({order:"ASC",orderby:"post__in",post__in:t,posts_per_page:-1,query:!0,type:"image"});r.more().done((function(){null!=r&&void 0!==r.models&&r.models.length&&l.add(r.models),e&&e.classList.remove("is-active")}))}})),m.on("update",(function(){var e=[];m.state().get("library").map((function(t){(t=t.toJSON()).url&&e.push(t.id)})),p=a.indexOf("-")>-1,u=e.join(","),l.val(u),v(),t&&window.parent.previewJIG()})),m.open()):m.open()}function h(e,t){for(var i=[],l=e;l<=t;l++)i.push(l);return i}function v(){var t=e("#ids");$ip=e("#imagePicker");var i=t.val();""===i?$ip.html(SCE.add_images):$ip.html(SCE.edit_gallery),"*"===i?$ip.hide():$ip.show()}function b(e,t){return"/"!==e.charAt(e.length-1)?e+"/"+t:e+t}function k(e,t){var i="";return""!==t&&"default"!=t&&null!=t&&(i=t.indexOf(" ")>-1&&'"'!==t.substr(0,1)&&'"'!==t.substr(t.length-1,1)&&"'"!==t.substr(0,1)&&"'"!==t.substr(t.length-1,1)?t.indexOf('"')>-1?" ".concat(e,"='").concat(t,"'"):" ".concat(e,'="').concat(t,'"'):" ".concat(e,"=").concat(t)),i}function w(){var l,a=e("#inputShortcode").val(),r=new RegExp("(?!\\[)(justified_image_grid"+SCE.add_to_sc_regex+")(?=\\s)","g"),d=a.match(r);if(d&&(s=d[0],l=(a=a.replace("["+s+" ","").replace("]","")).match(/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^\']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s\'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|'([^\']*)'(?:\s|$)|(\S+)(?:\s|$)/gim)),l){if(++_>1)return;for(var f=l.length,m=0;m<f;m++){var u=[],p=[];switch(u[0]=l[m].substring(0,l[m].indexOf("=")),u[1]=l[m].substring(l[m].indexOf("=")+1).trim(),"facebook_id"!=u[0]&&"facebook_album"!=u[0]||(n[u[0]]=u[1]),u[0]){case"flickr_user":case"flickr_photostream":case"flickr_favorites":case"flickr_group":case"flickr_photoset":case"flickr_collection":case"flickr_gallery":o[u[0]]=u[1].replace(/@/g,"\\@");break;case"flickr_search_text":case"flickr_search_tags":case"flickr_search_tags_m":case"flickr_search_user":case"flickr_search_group":case"flickr_search_sort":case"flickr_search_license":case"flickr_search_geo":o[u[0]]=u[1];break;case"nggallery":u[0]="ng_gallery";break;case"ngalbum":u[0]="ng_album"}e('#jig-sc-editor input[name="'+u[0]+'"]').val(u[1]),e('#jig-sc-editor select[name="'+u[0]+'"]').val(u[1]),"rss_url"==u[0]&&e('#jig-sc-editor textarea[name="rss_url"]').val(u[1]),"ng_gallery"!=u[0]&&"ng_album"!=u[0]&&"ng_random_images"!=u[0]&&"ng_search_options"!=u[0]&&"recents_post_type"!=u[0]&&"rml_id"!=u[0]||(c[u[0]]=[],-1!==u[1].indexOf(",")?(e('#jig-sc-editor select[name="'+u[0]+'"]').val("").change(),p=u[1].split(","),e.each(p,(function(t,i){c[u[0]].push(i),e('#jig-sc-editor input[name="'+u[0]+'[]"][value="'+i+'"]').attr("checked",!0)}))):c[u[0]]=[u[1]])}e.isEmptyObject(n)?e.isEmptyObject(o)||(o.flickr_user?(e("#"+o.flickr_user).click(),0==e("#"+o.flickr_user).length&&(o=void 0)):o.flickr_favorites?(e("#"+o.flickr_favorites).click(),0==e("#"+o.flickr_favorites).length&&(o=void 0)):o.flickr_photostream?(e("#"+o.flickr_photostream).click(),0==e("#"+o.flickr_photostream).length&&(o=void 0)):(o.flickr_search_text||o.flickr_search_tags)&&e("#fliSearchBtn").click()):e("#"+n.facebook_id).click(),e("#inputShortcode").attr("disabled",!0),e("#shortcodeLabel").text(SCE.currently_editing_this_shortcode+":"),t&&!e("#jigTabShortcode").hasClass("selectedTabButton")||i||T(SCE.shorcode_loaded)}v()}function x(){for(var t="["+s,i=0;i<r;i++){var l=e('#jig-sc-editor .jig_settings_group input[name="'+a[i]+'"]').val();null==l&&(l=e('#jig-sc-editor .jig_settings_group select[name="'+a[i]+'"] option:selected').val()),t+=k(a[i],l)}var n,c=e('#jig-sc-editor .jig_settings_group_load_more select[name="load_more"] option:selected').val(),_=e('#jig-sc-editor .jig_settings_group_recents select[name="recent_posts"] option:selected').val();if("default"!==c&&(t+=" load_more="+c,"off"!==c)){var d=e((n="#jig-sc-editor .jig_settings_group_load_more")+' input[name="load_more_limit"]').val(),f=e(n+' input[name="initially_load"]').val(),m=e(n+' input[name="load_more_text"]').val(),u=e(n+' input[name="load_more_count_text"]').val(),p=e(n+' input[name="load_more_offset"]').val(),g=e(n+' select[name="load_more_auto_width"] option:selected').val(),h=e(n+' select[name="load_more_mobile"] option:selected').val();t+=k("load_more_text",m),t+=k("load_more_count_text",u),t+=k("load_more_offset",p),"default"!==g&&(t+=" load_more_auto_width="+g),"default"!==h&&(t+=" load_more_mobile="+h),""!==f&&(t+=" initially_load="+f),""!==d&&(t+=" load_more_limit="+d)}if("default"!==_){var v=e((n="#jig-sc-editor .jig_settings_group_recents")+' select[name="recents_description"] option:selected').val(),b=e(n+' select[name="recents_description_2"] option:selected').val(),w=e(n+' select[name="recents_description_3"] option:selected').val(),x=e(n+' input[name="post_metadata_fields"]').val(),y=e(n+' input[name="author_prefix"]').val(),S=e(n+' input[name="comments_text"]').val(),C=e(n+' input[name="recents_title_override"]').val(),j=e(n+' input[name="post_ids_exclude"]').val(),E=e(n+' input[name="recents_exclude"]').val(),A=e(n+' input[name="recents_include"]').val(),T=e(n+' input[name="recents_tags"]').val(),I=e(n+' select[name="recents_filter_tax"] option:selected').val(),B=e(n+' select[name="recents_author"] option:selected').val(),F=e(n+' input[name="recents_filter_term"]').val(),L=e(n+' input[name="recents_placeholder"]').val(),G=e(n+' input[name="post_ids"]').val(),$=e(n+' select[name="recents_post_type"] option:selected').val()||e(n+' input[name="recents_post_type[]"]:checked').map((function(){return this.value})).get().join(","),J=e(n+' select[name="recents_link_to"] option:selected').val(),O=e(n+' select[name="recents_link"] option:selected').val(),R=e(n+' input[name="recents_link_text"]').val(),q=e(n+' select[name="recents_custom_links"] option:selected').val(),V=e(n+' input[name="recents_link_field"]').val(),z=e(n+' select[name="recents_sticky"] option:selected').val(),M=e(n+' input[name="excerpt_ending"]').val(),P=e(n+' input[name="excerpt_length"]').val(),U=e(n+' input[name="recents_date_range"]').val(),X=e(n+' input[name="recents_last_x_days"]').val(),N=e(n+' input[name="recents_parent_id"]').val(),Q=e(n+' input[name="recents_tree_depth"]').val();t+=" recent_posts="+_,t+=k("recents_description",v),t+=k("recents_description_2",b),t+=k("recents_description_3",w),t+=k("post_metadata_fields",x),"auto_excerpt"!=v&&"auto_manual_excerpt"!=v&&"auto_excerpt"!=b&&"auto_manual_excerpt"!=b&&"auto_excerpt"!=w&&"auto_manual_excerpt"!=w||(t+=k("excerpt_ending",M),""!==P&&(t+=" excerpt_length="+P)),t+=k("author_prefix",y),t+=k("comments_text",S),t+=k("recents_title_override",C),t+=k("recents_date_range",U),t+=k("recents_last_x_days",X),""!==E?t+=k("recents_exclude",E):""!=A&&(t+=k("recents_include",A)),t+=k("recents_tags",T),"default"!=I&&(t+=k("recents_filter_tax",I),t+=k("recents_filter_term",F)),t+=k("recents_author",B),""!==L&&(t+=" recents_placeholder="+L),"post"!==$&&""!==$&&(t+=" recents_post_type="+$),t+=k("post_ids",G),t+=k("post_ids_exclude",j),"post"!==J&&(t+=" recents_link_to="+J),"no"!==O&&(t+=k("recents_link",O)),t+=k("recents_link_text",R),"no"!==q&&(t+=" recents_custom_links="+q),t+=k("recents_link_field",V),"default"!==z&&(t+=" recents_sticky="+z),""!==N&&(t+=" recents_parent_id="+N),""!==Q&&(t+=" recents_tree_depth="+Q)}else{var H=e((n="#jig-sc-editor .jig_settings_group_facebook")+' input[name="facebook_id"]').val(),W=e(n+' input[name="facebook_album"]').val();if(""!=H&&""!=W){var D=e(n+' input[name="facebook_caching"]').val(),Z=e(n+' select[name="facebook_image_size"] option:selected').val(),K=e(n+' select[name="facebook_description"] option:selected').val(),Y=e(n+' select[name="facebook_count"] option:selected').val(),ee=e(n+' select[name="fb_lightbox_album"] option:selected').val(),te=e(n+' select[name="fb_actual_cover_photo"] option:selected').val(),ie=e(n+' select[name="fb_album_exclude"] option:selected').val(),le=e(n+' select[name="fb_breadcrumb"] option:selected').val(),ae=e(n+' select[name="fb_bc_separator"] option:selected').val(),re=e(n+' input[name="fb_bc_home_text"]').val();t+=" facebook_id="+H+" facebook_album="+W,t+=k("facebook_caching",D),t+=k("facebook_image_size",Z),t+=k("facebook_description",K),t+=k("facebook_count",Y),t+=k("fb_album_exclude",ie),t+=k("fb_breadcrumb",le),t+=k("fb_bc_separator",ae),t+=k("fb_lightbox_album",ee),t+=k("fb_actual_cover_photo",te),t+=k("fb_bc_home_text",re)}else{if(e.isEmptyObject(o))var ne=e((n="#jig-sc-editor .jig_settings_group_flickr")+' input[name="flickr_user"]').val(),oe=e(n+' input[name="flickr_photostream"]').val(),ce=e(n+' input[name="flickr_favorites"]').val(),se=e(n+' input[name="flickr_group"]').val(),_e=e(n+' input[name="flickr_photoset"]').val(),de=e(n+' input[name="flickr_collection"]').val(),fe=e(n+' input[name="flickr_gallery"]').val(),me=e(n+' input[name="flickr_caching"]').val(),ue=e(n+' select[name="flickr_link"] option:selected').val(),pe=e(n+' select[name="flickr_breadcrumb"] option:selected').val(),ge=e(n+' select[name="flickr_bc_separator"] option:selected').val(),he=e(n+' input[name="flickr_bc_home_text"]').val(),ve=e(n+' select[name="flickr_lightbox_set"] option:selected').val(),be=e(n+' select[name="flickr_count"] option:selected').val(),ke=e(n+' select[name="flickr_description"] option:selected').val(),we=e(n+' input[name="flickr_search_text"]').val(),xe=e(n+' input[name="flickr_search_tags"]').val(),ye=e(n+' select[name="flickr_search_tags_m"] option:selected').val(),Se=e(n+' input[name="flickr_search_user"]').val(),Ce=e(n+' input[name="flickr_search_group"]').val(),je=e(n+' select[name="flickr_search_sort"] option:selected').val(),Ee=e(n+' input[name="flickr_search_license[]"]:checked').map((function(){return this.value})).get().join(","),Ae=e(n+' select[name="flickr_search_geo"] option:selected').val();else{ne=o.flickr_user?o.flickr_user.replace(/\\@/g,"@"):"",oe=o.flickr_photostream?o.flickr_photostream.replace(/\\@/g,"@"):"",ce=o.flickr_favorites?o.flickr_favorites.replace(/\\@/g,"@"):"",se=o.flickr_group?o.flickr_group.replace(/\\@/g,"@"):"",_e=o.flickr_photoset?o.flickr_photoset.replace(/\\@/g,"@"):"",de=o.flickr_collection?o.flickr_collection.replace(/\\@/g,"@"):"",fe=o.flickr_gallery?o.flickr_gallery.replace(/\\@/g,"@"):"";we=o.flickr_search_text?o.flickr_search_text.replace(/\\@/g,"@"):"",xe=o.flickr_search_tags?o.flickr_search_tags.replace(/\\@/g,"@"):"",ye=o.flickr_search_tags_m?o.flickr_search_tags_m.replace(/\\@/g,"@"):"",Se=o.flickr_search_user?o.flickr_search_user.replace(/\\@/g,"@"):"",Ce=o.flickr_search_group?o.flickr_search_group.replace(/\\@/g,"@"):"",je=o.flickr_search_sort?o.flickr_search_sort.replace(/\\@/g,"@"):"",Ee=o.flickr_search_license?o.flickr_search_license.replace(/\\@/g,"@"):"",Ae=o.flickr_search_geo?o.flickr_search_geo.replace(/\\@/g,"@"):""}if(""!=ne||""!=oe||""!=ce||""!=we||""!=xe){var Te=t.length;""==we&&""==xe?(""!=ne&&(""!=se?t+=" flickr_user="+ne+" flickr_group="+se:""!=_e?t+=" flickr_user="+ne+" flickr_photoset="+_e:""!=de?t+=" flickr_user="+ne+" flickr_collection="+de:""!=fe&&(t+=" flickr_user="+ne+" flickr_gallery="+fe)),""!=oe?t+=" flickr_photostream="+oe:""!=ce&&(t+=" flickr_favorites="+ce)):(t+=k("flickr_search_text",we),t+=k("flickr_search_tags",xe),t+=k("flickr_search_tags_m",ye),t+=k("flickr_search_user",Se),t+=k("flickr_search_group",Ce),t+=k("flickr_search_sort",je),t+=k("flickr_search_license",Ee),t+=k("flickr_search_geo",Ae)),t.length>Te&&(t+=k("flickr_link",ue),t+=k("flickr_caching",me),t+=k("flickr_count",be),t+=k("flickr_description",ke),t+=k("flickr_breadcrumb",pe),t+=k("flickr_bc_separator",ge),t+=k("flickr_bc_home_text",he),t+=k("flickr_lightbox_set",ve))}else{var Ie=e((n="#jig-sc-editor .jig_settings_group_rss")+' textarea[name="rss_url"]').val();if(""!=Ie){var Be=e(n+' select[name="rss_links_to"] option:selected').val(),Fe=e(n+' select[name="rss_description"] option:selected').val(),Le=e(n+' input[name="rss_excerpt_length"]').val(),Ge=e(n+' input[name="rss_excerpt_ending"]').val(),$e=e(n+' select[name="rss_link"] option:selected').val(),Je=e(n+' input[name="rss_link_text"]').val(),Oe=e(n+' input[name="rss_caching"]').val();t+=" rss_url="+Ie,t+=k("rss_links_to",Be),t+=k("rss_description",Fe),""!=Le&&(t+=" rss_excerpt_length="+Le),t+=k("rss_excerpt_ending",Ge),t+=k("rss_link",$e),t+=k("rss_link_text",Je),""!=Oe&&(t+=" rss_caching="+Oe)}else{var Re=0===e((n="#jig-sc-editor .jig_settings_group_rml")+" .notInstalled").length?e(n+' select[name="rml_id"] option:selected').val()||e(n+' input[name="rml_id[]"]:checked').map((function(){return this.value})).get().join(","):void 0;if(void 0!==Re&&"default"!==Re){t+=" rml_id="+Re;var qe=e(n+' select[name="rml_count"] option:selected').val(),Ve=e(n+' select[name="rml_flatten"] option:selected').val(),ze=e(n+' select[name="rml_lightbox_groups"] option:selected').val(),Me=e(n+' select[name="rml_extend_filtering"] option:selected').val(),Pe=e(n+' select[name="rml_description"] option:selected').val(),Ue=e(n+' select[name="rml_breadcrumb"] option:selected').val();if("no"!==Ve&&(t+=" rml_flatten="+Ve),"default"!==qe&&(t+=" rml_count="+qe),"default"!==ze&&(t+=" rml_lightbox_groups="+ze),"default"!==Me&&(t+=" rml_extend_filtering="+Me),"default"!==Pe&&(t+=" rml_description="+Pe),"default"==Ue){var Xe=e(n+' select[name="rml_bc_top_level"] option:selected').val(),Ne=e(n+' select[name="rml_bc_separator"] option:selected').val();"default"!==Xe&&(t+=" rml_bc_top_level="+Xe),"default"!==Ne&&(t+=" rml_bc_separator="+Ne),t+=k("rml_bc_home_text",e(n+' input[name="rml_bc_home_text"]').val())}else t+=" rml_breadcrumb="+Ue}else if("yes"===SCE.nggallery){var Qe=e((n="#jig-sc-editor .jig_settings_group_nextgen")+' select[name="ng_gallery"] option:selected').val()||e(n+' input[name="ng_gallery[]"]:checked').map((function(){return this.value})).get().join(","),He=e(n+' select[name="ng_album"] option:selected').val()||e(n+' input[name="ng_album[]"]:checked').map((function(){return this.value})).get().join(","),We=e(n+' input[name="ng_pics"]').val(),De=e(n+' input[name="ng_tags_gallery"]').val(),Ze=e(n+' input[name="ng_tags_album"]').val(),Ke=e(n+' input[name="ng_recent_galleries"]').val(),Ye=e(n+' select[name="ng_recent_images"] option:selected').val(),et=e(n+' select[name="ng_random_images"] option:selected').val()||e(n+' input[name="ng_random_images[]"]:checked').map((function(){return this.value})).get().join(","),tt=e(n+' input[name="ng_search_query"]').val(),it=e(n+' select[name="ng_search_options"] option:selected').val()||e(n+' input[name="ng_search_options[]"]:checked').map((function(){return this.value})).get().join(",");if("default"!==Qe&&""!==Qe||"default"!==He&&""!==He||""!==We||""!==De||""!==Ze||""!==Ke||"default"!==Ye||"default"!==et&&""!==et||""!==tt){var lt=e(n+' input[name="ng_narrow_by_tags"]').val(),at=e(n+' input[name="nextgen_cf_link"]').val(),rt=e(n+' select[name="ng_count"] option:selected').val(),nt=e(n+' select[name="ng_lightbox_gallery"] option:selected').val(),ot=e(n+' select[name="ng_description"] option:selected').val(),ct=e(n+' select[name="ng_display_tags"] option:selected').val(),st=e(n+' select[name="ng_gallery_links"] option:selected').val(),_t=e(n+' select[name="ng_breadcrumb"] option:selected').val(),dt=e(n+' select[name="ng_intersect_tags"] option:selected').val();if(""!==We)t+=k("ng_pics",We);else if("default"!==Ye)t+=" ng_recent_images="+Ye;else if("default"!==et&&""!==et)t+=" ng_random_images="+et;else if(""!==tt)t+=k("ng_search_query",tt),t+=k("ng_search_options",it),"default"!==dt&&(t+=" ng_intersect_tags="+dt);else if(""!==De)t+=k("ng_tags_gallery",De),"default"!==dt&&(t+=" ng_intersect_tags="+dt);else if("default"!==Qe&&""!==Qe?t+=" ng_gallery="+Qe:"default"!==He&&""!==He?t+=" ng_album="+He:""!==Ze?t+=k("ng_tags_album",Ze):""!==Ke&&(t+=" ng_recent_galleries="+Ke),"default"!==_t){t+=" ng_breadcrumb="+_t;var ft=e(n+' select[name="ng_bc_separator"] option:selected').val(),mt=e(n+' input[name="ng_bc_base"]').val(),ut=e(n+' select[name="ng_bc_home"] option:selected').val(),pt=e(n+' input[name="ng_bc_home_text"]').val(),gt=e(n+' select[name="ng_bc_home_clickable"] option:selected').val(),ht=e(n+' select[name="ng_bc_last_clickable"] option:selected').val(),vt=e(n+' select[name="ng_bc_top_level"] option:selected').val(),bt=e(n+' select[name="ng_bc_add_separator"] option:selected').val();"default"!==ft&&(t+=" ng_bc_separator="+ft),t+=k("ng_bc_base",mt),"default"!==ut&&(t+=" ng_bc_home="+ut),t+=k("ng_bc_home_text",pt),"default"!==gt&&(t+=" ng_bc_home_clickable="+gt),"default"!==ht&&(t+=" ng_bc_last_clickable="+ht),"default"!==vt&&(t+=" ng_bc_top_level="+vt),"default"!==bt&&(t+=" ng_bc_add_separator="+bt)}"default"!==rt&&(t+=" ng_count="+rt),"default"!==nt&&(t+=" ng_lightbox_gallery="+nt),"default"!==ot&&(t+=" ng_description="+ot),""!==lt&&(t+=" ng_narrow_by_tags="+lt),""!==at&&(t+=" nextgen_cf_link="+at),"default"!==ct&&(t+=" ng_display_tags="+ct),"default"!==st&&(t+=" ng_gallery_links="+st)}}}}}}return t+="]",e("#outputShortcodeLabel").removeClass("stillEmpty"),e("#outputShortcode").removeClass("stillEmpty").val(t).trigger("change"),t}function y(t){t.find(".fbMouseIndicator").removeClass("fbStandby").addClass("fbLoading").text("...");var i='<img class="fbAlbumPhoto" src="'+t.attr("data-cover-url")+'" />';t.removeClass("fbSkipImg").find(".fbAlbumToLoad").after(i),t.find("img").on("load",(function(){e(this).fadeIn(300),t.find(".fbMouseIndicator").fadeOut(300,(function(){e(this).remove()}))})).on("error",(function(){t.find(".fbMouseIndicator").fadeOut(300,(function(){e(this).remove()})),t.addClass("fbNoImg").find(".fbAlbumToLoad").removeClass("fbAlbumToLoad").addClass("fbAlbumError").text(SCE.error_loading_cover_photo).siblings(".fbAlbumCount").text("0"),t.hasClass("fbSelectedAlbum")&&(t.removeClass("fbSelectedAlbum"),e("#facebook input[name='facebook_album']").val(""))}))}function S(t){t.find(".fliMouseIndicator").removeClass("fliStandby").addClass("fliLoading").text("...");var i='<div class="fliElementPhoto"><img src="'+t.attr("data-cover")+'" /></div>';t.removeClass("fliSkipImg").find(".fliElementToLoad").after(i),t.find("img").on("load",(function(){e(this).fadeIn(300),t.find(".fliMouseIndicator").fadeOut(300,(function(){e(this).remove()}))})).on("error",(function(){t.find(".fliMouseIndicator").fadeOut(300,(function(){e(this).remove()})),t.addClass("fliNoImg").find(".fliElementToLoad").removeClass("fliElementToLoad").addClass("fliElementError").text(SCE.error).siblings(".fliElementCount").text("0"),t.hasClass("fliSelectedElement")&&(t.removeClass("fliSelectedElement"),e("#fliRow input").val(""))}))}function C(e,t){var i="";if(e)for(var l=0;l<e.length;l++){var a=e[l],r=a.type,n=(0==r?"rml-type-folder":1==r?"rml-type-collection":"rml-type-gallery")+" ",o=0==t?"":"&#8211;".repeat(t)+"&nbsp;";i+='<option class="'.concat(n,'" value="').concat(a.id,'">')+"".concat(o).concat(a.name)+(a.cnt>0?" (".concat(a.cnt,")"):"")+"</option > ",a.children&&a.children.length&&(i+=C(a.children,t+1))}return i}function j(t,i){var l="";return t.each((function(t,a){var r,n,o=e(a).find("> a"),c=e(a).find("> ul > li"),s=o.attr("data-type")||o.attr("data-aio-type"),_=o.attr("data-id")||o.attr("data-aio-id"),d=(0==s?"[F]":1==s?"[C]":"[G]")+" ",f=(0==s?"rml-type-folder":1==s?"rml-type-collection":"rml-type-gallery")+" ",m=0==i?"":"&nbsp;".repeat(3*i)+"&nbsp;",u=o.find("> .rml-name, > .aio-node-name");if(0!==u.length)r=m+d+u.text(),n=0==(n=o.find("> .rml-cnt, > .aio-cnt").text())?"":" ("+n+")";else{var p=o.find(":not(iframe)").addBack().contents().filter((function(){return 3==this.nodeType}));r=m+d+p[1].nodeValue.trim(),n=0==p[3].nodeValue?"":" ("+p[3].nodeValue+")"}l+='<option class="'+f+'" value="'+_+'">'+r+n+"</option>",0!==c.length&&(l+=j(c,i+1))})),l}function E(){if(""!=e('#jig-sc-editor input[name="id"]').val()||""!=e('#jig-sc-editor input[name="gallery"]').val()||""!=e('input[name="ids"]').val()||0!==e('input[name="image_categories"]').length&&(""!=e('input[name="image_categories"]').val()||""!=e('input[name="image_tags"]').val()||""!=e('input[name="image_tax_term"]').val()&&"default"!=e('select[name="image_taxonomy"] option:selected').val())||""!=e('input[name="parent_id"]').val()||""!=e('input[name="facebook_id"]').val()&&""!=e('input[name="facebook_album"]').val()||""!=e('input[name="flickr_user"]').val()&&(""!=e('input[name="flickr_group"]').val()||""!=e('input[name="flickr_photoset"]').val()||""!=e('input[name="flickr_collection"]').val()||""!=e('input[name="flickr_gallery"]').val())||""!=e('input[name="flickr_photostream"]').val()||""!=e('input[name="flickr_favorites"]').val()||""!=e('input[name="flickr_search_text"]').val()||""!=e('input[name="flickr_search_tags"]').val()||"yes"==e('select[name="recent_posts"] option:selected').val()||0!==e('input[name="ng_pics"]').length&&("default"!=e('select[name="ng_gallery"] option:selected').val()||"default"!=e('select[name="ng_album"] option:selected').val()||"default"!=e('select[name="ng_recent_images"] option:selected').val()||"default"!=e('select[name="ng_random_images"] option:selected').val()||""!=e('input[name="ng_pics"]').val()||""!=e('input[name="ng_search_query"]').val()||""!=e('input[name="ng_tags_gallery"]').val()||""!=e('input[name="ng_tags_album"]').val()||""!=e('input[name="ng_recent_galleries"]').val()||e('input[name="ng_gallery[]"]:checked').length>0||e('input[name="ng_album[]"]:checked').length>0||e('input[name="ng_random_images[]"]:checked').length>0)||""!=e('textarea[name="rss_url"]').val()){x();var t=e("#outputShortcode").val(),i=t.match(/([a-z_\d]*?)=([\d\sa-zA-Z\-_'\/"(),.*@!?#:]*)(?= [a-z_\d]*?|])/g);if(i){for(var l="get_jig(array(",a=i.length,r=0;r<a;r++){var n=i[r].split("=");l+="'"+n[0]+"' => '"+n[1]+"', "}l=l.substring(0,l.length-2),l+="));";var o={" '\"'":" '\"","'\"'":"\"'"};for(var c in o)l=l.replace(new RegExp(c,"g"),o[c]);e("#templateTagContainer").show().find("#templateTag").text("<?php "+l+" ?>").next().show(),e("#doShortcodeContainer").show().find("#doShortcode").text("<?php echo do_shortcode('"+t+"'); ?>").next().show(),T(SCE.template_tag_created)}}else e("#templateTagContainer").show().find("#templateTag").text(SCE.template_tag_help_set_up_ids).next().hide(),e("#doShortcodeContainer").hide().next().hide()}var A=[];function T(t){0===e("#jig-toast").length&&e('<div id="jig-toast">'+t+"</div>").appendTo("body");var i=e("#jig-toast"),l=i.outerWidth(),a=i.outerHeight();i.css({left:e(window).width()/2-l/2,top:e(window).height()/2-a/2}),i.addClass("jig-toast-show"),setTimeout((function(){i.removeClass("jig-toast-show"),setTimeout((function(){i.remove()}),200)}),1e3)}window.editShortcodeFromVC=function(){n=[],o=[],c=[],_=0,e.each(l,(function(e,t){t.abort()})),e("#fbOffBtn, #fliOffBtn, #igOffBtn, #jigTabGeneralSettings").click(),t||e("#outputShortcode").width(e(window).width()-e("#outputShortcode").offset().left-22),void 0!==window.parent.JIG_VC.params&&e("#inputShortcode").val(window.parent.JIG_VC.params.content),w()},window.resetSCE=function(){e("#inputShortcode").removeAttr("disabled"),e("#outputShortcodeLabel, #outputShortcode").addClass("stillEmpty"),e(".morphed").each((function(){var t=e(this),i=t.attr("data-name");t.after(A[i]).remove()}));var t=window.parent.jQuery('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]');t.find(".ui-dialog-titlebar-collapsed .ui-dialog-titlebar-minimize").click(),t.css({right:"auto",bottom:"auto"}),window.scrollTo(0,0),e("#jig-sc-editor form")[0].reset()},e("#jig-sc-editor").on("change",".abilityToMorph",(function(){var t=e(this);if(""===t.val()){var i=t.attr("name");A[i]=t.clone(),t.siblings(".minihelp").removeClass("minihelpShort").addClass("minihelpCheckbox"),t.wrap('<div class="checkboxes morphed" data-name="'+i+'" />'),t.find("option").each((function(){var t=e(this),l=t.attr("value"),a=i+"["+l+"]";if(""===l)return t.unwrap(),void t.remove();if(t.hasClass("noCheckboxForThis"))t.remove();else{var r="";void 0!==c[i]?e.inArray(l,c[i])>-1&&(r=" checked"):t.hasClass("selectedByDefault")&&(r=" checked"),t.after('<input type="checkbox" class="checkbox" id="'+a+'" name="'+i+'[]"'+r+' value="'+l+'"><label class="checkboxLabel" for="'+a+'">'+t.text()+"</label><br>").remove()}}))}})),e(".tabButton").click((function(){var t="#jig"+e(this).attr("id").substring(6);e(".selectedTab").removeClass("selectedTab"),e(t).addClass("selectedTab").next().addClass("selectedTab"),e(".selectedTabButton").removeClass("selectedTabButton"),e(this).addClass("selectedTabButton")})),e(window).on("load",(function(){e("#jig-sc-editor-loading").hide(),e("#jig-sc-editor").show(),d()})),window.generateShortcode=x}(jQuery);