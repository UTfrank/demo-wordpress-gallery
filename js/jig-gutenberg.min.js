!function(e,t){if(null===document.querySelector('script[src*="load-scripts.php"][src$="ver=5.2"],script[src*="load-scripts.php"][src$="ver=5.1"],script[src*="load-scripts.php"][src$="ver=5.0"]')){var o=e.element.createElement("svg",{width:24,height:24,class:"jig-grid-icon"},e.element.createElement("path",{d:"M0 0h9v7H0zm10 0h5v7h-5zm6 0h4v7h-4zm-3 8h7v6h-7zM4 8h8v6H4zM0 8h3v6H0zm0 7h9v5H0zm10 0h4v5h-4zm5 0h5v5h-5z"})),r=(new Date).toISOString(),n=[],l=!1;e.blocks.registerBlockType("jig-gutenberg/grid-chooser",{title:"Justified Image Grid",description:t.desc,category:e.blocks.getCategories().find((function(e){if("media"===e.slug)return!0}))?"media":"common",icon:o,example:{attributes:{gallery:"gutenberg-preview"}},attributes:{gallery:{default:"gutenberg"}},edit:function(o){var i=e.element.useState({updated:"now",postOffset:0});o.updated=i[0].updated,o.postOffset=i[0].postOffset,o.setState=i[1];var a,s=[ajaxurl,"?action=jig_preview","&jig-preview-shortcode=",encodeURIComponent("[justified_image_grid lightbox=links-off gallery="+o.attributes.gallery+"]"),"&security="+t.nonce,"&gutenberg=1","&updated="+o.updated].join("");switch(o.attributes.gallery){case"gutenberg-preview":a=e.element.RawHTML({children:'<img src="'+t.previewImageURL+'" width="500" height="263" />'});break;case"gutenberg":a=e.element.createElement(e.components.Placeholder,{preview:e.element.RawHTML({children:t.placeholderHeader+t.placeholderInstructions})});break;default:a=e.element.RawHTML({children:'<iframe width="100%" height="500" src="'+s+'"></iframe>'})}var c=e.data.useSelect((function(e){return{posts:e("core").getEntityRecords("postType","justified-image-grid",{per_page:100,offset:o.postOffset,before:r})}}));!l&&c&&c.posts&&(100==c.posts.length?o.setState({postOffset:o.postOffset+100}):l=!0,c.posts.length>0&&(n=n.concat(c.posts))),gridOptions=[],n&&l?(gridOptions.push({value:"gutenberg",label:0==n.length?t.noGrids:t.choose}),n.forEach((function(e){gridOptions.push({value:e.id,label:(e.title.rendered?e.title.rendered:t.untitled)+" (#"+e.id+")"})}))):gridOptions.push({value:0,label:t.loading});var p="gutenberg"===o.attributes.gallery;return[a,e.element.createElement(e.blockEditor.BlockControls,{},[e.element.createElement(e.components.ToolbarGroup?e.components.ToolbarGroup:e.components.Toolbar,{className:"jig-toolbar-group"},[e.components.ToolbarItem?e.element.createElement(e.components.ToolbarItem,{as:e.components.SelectControl,className:"jig-toolbar-item",value:o.attributes.gallery,onChange:function(e){o.setAttributes({gallery:e})},options:gridOptions}):null,e.components.ToolbarItem?null:e.element.createElement(e.components.SelectControl,{value:o.attributes.gallery,className:"jig-toolbar-item",onChange:function(e){o.setAttributes({gallery:e})},options:gridOptions}),e.element.createElement(e.components.ToolbarButton,{icon:p?"plus":"edit",label:p?t.create:t.edit,onClick:function(){var e;e=p?t.createGridURL:t.editURL[0]+o.attributes.gallery+t.editURL[1],window.open(e,"_blank")}}),e.element.createElement(e.components.ToolbarButton,{icon:"update",label:p?t.updateGridList:t.updateGrid,onClick:function(){var e={updated:Date.now()};p&&(r=(new Date).toISOString(),e.postOffset=0,n=[],l=!1),o.setState(e)}})])]),e.element.createElement(e.blockEditor.InspectorControls,{},[e.element.createElement(e.components.PanelBody,{},[e.element.RawHTML({children:t.placeholderInstructions})])])]}})}}(window.wp,window.jigGutenberg);